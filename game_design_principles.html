<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Design Principles - Interactive Lesson</title>
    
    <!-- External Libraries for PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .learning-objectives {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 24px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.05);
        }
        
        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-section.active {
            display: block;
        }

        .save-button-container {
            text-align: center;
            margin-top: 40px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .game-principles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .principle-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .principle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-color: #667eea;
        }
        
        .principle-card .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .principle-card h3 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .principle-card p {
            color: #666;
            font-size: 14px;
            display: none;
        }
        
        .principle-card.expanded p {
            display: block;
            animation: fadeIn 0.3s;
        }

        .video-link-container {
            background: #f0f4ff;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #dbe1ff;
            transition: all 0.3s;
        }

        .video-link-container:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .video-link-container h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .video-link-container a {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .video-link-container a:hover {
            background: #5a6dcf;
        }
        
        .definitions-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            background: #f0f4ff;
            padding: 20px;
            border-radius: 15px;
        }

        .definition-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }

        .definition-card h4 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .definition-card p {
            color: #555;
            font-size: 15px;
            line-height: 1.5;
        }
        
        .game-eval-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .game-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .game-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .game-icon {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            color: white;
            margin-bottom: 15px;
        }
        
        .eval-form {
            margin-top: 15px;
        }
        
        .eval-form label {
            display: block;
            margin-top: 10px;
            color: #555;
            font-weight: 600;
        }
        
        .eval-form select, .eval-form input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: border-color 0.3s;
        }
        
        .eval-form select:focus, .eval-form input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 15px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            background: #aaa;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        .knowledge-check {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        
        .knowledge-check h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .quiz-option {
            display: block;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quiz-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .quiz-option.correct {
            border-color: #4caf50;
            background: #e8f5e9;
        }
        
        .quiz-option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .portfolio-template {
            background: white;
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .portfolio-section {
            margin: 20px 0;
        }
        
        .portfolio-section h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .portfolio-section textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }
        
        .collaboration-area {
            background: #f0f4ff;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .student-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        
        .comparison-column {
            background: white;
            padding: 15px;
            border-radius: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .accessibility-note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .accessibility-note h4 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎮 Game Design Principles</h1>
        
        <div class="learning-objectives">
            <h2>Learning Objectives</h2>
            <p><strong>Deep Understanding:</strong></p>
            <ul>
                <li>Evaluate existing games in terms of mechanics, aesthetics, and usability</li>
                <li>Generate alternative designs and evaluate them against requirements</li>
                <li>Consider accessibility and diverse user needs in game design</li>
            </ul>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress">0%</div>
        </div>
        
        <div class="tabs">
            <button class="tab active" data-section="intro">1. Introduction</button>
            <button class="tab" data-section="principles">2. Design Principles</button>
            <button class="tab" data-section="evaluation">3. Game Evaluation</button>
            <button class="tab" data-section="collaboration">4. Peer Comparison</button>
            <button class="tab" data-section="portfolio">5. Portfolio Planning</button>
            <button class="tab" data-section="assessment">6. Knowledge Check</button>
        </div>
        
        <div id="intro" class="content-section active">
            <h2>Welcome to Game Design Principles! 🚀</h2>
            <p>Today we'll explore what makes games engaging and how classic games have evolved to inspire modern gaming.</p>
            
            <div class="knowledge-check">
                <h3>🤔 Quick Think: What Makes a Good Game?</h3>
                <p>Before we dive in, think about your favorite game. What makes it special?</p>
                <div>
                    <label class="quiz-option">
                        <input type="radio" name="intro1"> Amazing graphics and visuals
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="intro1"> Engaging gameplay mechanics
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="intro1"> Compelling story and characters
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="intro1"> All of the above contribute
                    </label>
                </div>
                <p id="intro1-feedback" style="margin-top: 10px; color: #667eea; display: none;">
                    Great thinking! All these elements can contribute to a good game, and different players value different aspects!
                </p>
            </div>
            
            <div class="accessibility-note">
                <h4>🌟 Design for Everyone</h4>
                <p>Remember: Great games are accessible to all players, including those with disabilities. Consider:</p>
                <ul>
                    <li>Colorblind modes for better visibility</li>
                    <li>Customizable controls for motor accessibility</li>
                    <li>Subtitles and visual cues for hearing accessibility</li>
                    <li>Difficulty options for cognitive accessibility</li>
                </ul>
            </div>
            <div class="save-button-container">
                <button class="btn save-pdf-btn" data-section-id="intro">Save as PDF</button>
            </div>
        </div>
        
        <div id="principles" class="content-section">
            <h2>Core Game Design Principles</h2>
            <p>Click each principle to learn more about how it impacts player experience:</p>
            
            <div class="video-link-container">
                <h3>🎥 Watch an Overview</h3>
                <p>For a deeper dive, watch this great video on the core principles of game design.</p>
                <a href="https://youtu.be/G8AT01tuyrk?si=mROhzxUG1KRU0Of2" target="_blank" rel="noopener noreferrer">Watch on YouTube</a>
            </div>

            <div class="game-principles">
                <div class="principle-card">
                    <div class="icon">⚖️</div>
                    <h3>Balance</h3>
                    <p>Ensuring gameplay is fair and no single strategy dominates. Creates the perfect blend of difficulty and fairness.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">🎵</div>
                    <h3>Pacing</h3>
                    <p>Controlling rhythm and tempo to maintain engagement and prevent boredom or frustration.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">🎯</div>
                    <h3>Player Engagement</h3>
                    <p>Keeping players interested through challenges, rewards, and progression systems.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">💬</div>
                    <h3>Feedback Loops</h3>
                    <p>Providing clear, immediate responses to player actions to maintain engagement.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">🌊</div>
                    <h3>Flow</h3>
                    <p>Creating a state where players are fully absorbed, losing track of time.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">🔄</div>
                    <h3>Replayability</h3>
                    <p>Encouraging players to return through varied experiences and outcomes.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">🏆</div>
                    <h3>Reward Systems</h3>
                    <p>Motivating players through achievements, unlocks, and progression.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">⚡</div>
                    <h3>Challenge</h3>
                    <p>Gradually increasing difficulty to provide achievement and mastery.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">🎭</div>
                    <h3>Player Choice</h3>
                    <p>Allowing meaningful decisions that impact outcomes and story.</p>
                </div>
                <div class="principle-card">
                    <div class="icon">✨</div>
                    <h3>Simplicity</h3>
                    <p>Making games easy to learn but potentially hard to master.</p>
                </div>
            </div>
            
            <div class="knowledge-check">
                <h3>🎯 Apply Your Knowledge</h3>
                <p>Which principle is MOST important for keeping players coming back?</p>
                <div>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="principle-quiz"> Balance only
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="principle-quiz"> Graphics quality
                    </label>
                    <label class="quiz-option" data-correct="true">
                        <input type="radio" name="principle-quiz"> A combination of multiple principles
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="principle-quiz"> Story alone
                    </label>
                </div>
            </div>
            <div class="save-button-container">
                <button class="btn save-pdf-btn" data-section-id="principles">Save as PDF</button>
            </div>
        </div>
        
        <div id="evaluation" class="content-section">
            <h2>Evaluate Classic Games</h2>
            <p>Analyze these legendary games that shaped the industry. Use the definitions below to guide your evaluation:</p>
            
            <div class="definitions-container">
                <div class="definition-card">
                    <h4>⚙️ Mechanics</h4>
                    <p>The rules and systems governing gameplay. Think about player actions, game logic, and the core activities that keep players engaged.</p>
                </div>
                <div class="definition-card">
                    <h4>🎨 Aesthetics</h4>
                    <p>The overall look, sound, and feel of the game. This covers visual art, sound effects, music, and the emotional responses the game evokes.</p>
                </div>
                <div class="definition-card">
                    <h4>🎮 Usability</h4>
                    <p>How easy and intuitive the game is to learn and play. This includes the user interface (UI), controls, and how clearly information is communicated.</p>
                </div>
            </div>
            
            <div class="game-eval-container">
                <div class="game-card">
                    <div class="game-icon">🟦</div>
                    <h3>Tetris (1984)</h3>
                    <p><strong>Created by:</strong> Alexey Pajitnov</p>
                    <p><strong>Innovation:</strong> Simple yet addictive puzzle mechanics</p>
                    <div class="eval-form">
                        <label>Mechanics (1-5):
                            <select data-game="tetris" data-criterion="mechanics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Aesthetics (1-5):
                            <select data-game="tetris" data-criterion="aesthetics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Usability (1-5):
                            <select data-game="tetris" data-criterion="usability">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="game-card">
                    <div class="game-icon">👻</div>
                    <h3>Pac-Man (1980)</h3>
                    <p><strong>Created by:</strong> Namco</p>
                    <p><strong>Innovation:</strong> First game with a mascot character</p>
                    <div class="eval-form">
                        <label>Mechanics (1-5):
                            <select data-game="pacman" data-criterion="mechanics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Aesthetics (1-5):
                            <select data-game="pacman" data-criterion="aesthetics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Usability (1-5):
                            <select data-game="pacman" data-criterion="usability">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="game-card">
                    <div class="game-icon">🐍</div>
                    <h3>Snake (1976)</h3>
                    <p><strong>Created by:</strong> Gremlin Industries</p>
                    <p><strong>Innovation:</strong> Growth mechanics and spatial awareness</p>
                    <div class="eval-form">
                        <label>Mechanics (1-5):
                            <select data-game="snake" data-criterion="mechanics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Aesthetics (1-5):
                            <select data-game="snake" data-criterion="aesthetics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Usability (1-5):
                            <select data-game="snake" data-criterion="usability">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="game-card">
                    <div class="game-icon">👾</div>
                    <h3>Space Invaders (1978)</h3>
                    <p><strong>Created by:</strong> Taito</p>
                    <p><strong>Innovation:</strong> First shooter with increasing difficulty</p>
                    <div class="eval-form">
                        <label>Mechanics (1-5):
                            <select data-game="space" data-criterion="mechanics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Aesthetics (1-5):
                            <select data-game="space" data-criterion="aesthetics">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                        <label>Usability (1-5):
                            <select data-game="space" data-criterion="usability">
                                <option value="">Select</option><option value="5">5 - Excellent</option><option value="4">4 - Good</option><option value="3">3 - Average</option><option value="2">2 - Poor</option><option value="1">1 - Very Poor</option>
                            </select>
                        </label>
                    </div>
                </div>
            </div>
            
            <button class="btn" id="generate-summary-btn">Generate My Evaluation Summary</button>
            <div id="evaluation-summary" style="margin-top: 20px;"></div>
            <div class="save-button-container">
                <button class="btn save-pdf-btn" data-section-id="evaluation">Save as PDF</button>
            </div>
        </div>
        
        <div id="collaboration" class="content-section">
            <h2>Peer Comparison & Discussion</h2>
            <p>Compare your evaluations with your co-worker to understand different perspectives:</p>
            
            <div class="collaboration-area">
                <h3>🤝 Collaborative Analysis</h3>
                <p>Work with your partner to compare your game evaluations:</p>
                
                <div class="student-comparison">
                    <div class="comparison-column">
                        <h4>Your Evaluation</h4>
                        <div id="your-eval-summary">
                            <p>Complete the game evaluation section first!</p>
                        </div>
                    </div>
                    <div class="comparison-column">
                        <h4>Partner's Evaluation</h4>
                        <textarea placeholder="Have your partner share their evaluation summary here..." rows="6"></textarea>
                    </div>
                </div>
                
                <div class="knowledge-check" style="margin-top: 20px;">
                    <h3>Discussion Points</h3>
                    <ul>
                        <li>Which game did you both rate highest? Why?</li>
                        <li>Where did your opinions differ most?</li>
                        <li>How do personal preferences affect game evaluation?</li>
                        <li>What modern games use similar principles?</li>
                    </ul>
                </div>
            </div>
            
            <div class="accessibility-note">
                <h4>💡 Ethical Design Consideration</h4>
                <p>Discuss with your partner: How can we ensure games are fun without being addictive? Consider:</p>
                <ul>
                    <li>Time limits and break reminders</li>
                    <li>Avoiding manipulative reward mechanics</li>
                    <li>Age-appropriate content and features</li>
                    <li>Transparent progression systems</li>
                </ul>
            </div>
            <div class="save-button-container">
                <button class="btn save-pdf-btn" data-section-id="collaboration">Save as PDF</button>
            </div>
        </div>
        
        <div id="portfolio" class="content-section">
            <h2>Portfolio Planning Template</h2>
            <p>Use this template to plan your game development portfolio:</p>
            
            <div class="portfolio-template">
                <div class="portfolio-section">
                    <h3>📝 Statement of Intent</h3>
                    <textarea placeholder="Introduce your game concept, target audience, and key objectives..."></textarea>
                </div>
                <div class="portfolio-section">
                    <h3>🎯 Target Audience</h3>
                    <textarea placeholder="Describe your target players (age, interests, gaming experience)..."></textarea>
                </div>
                <div class="portfolio-section">
                    <h3>🎮 Core Mechanics</h3>
                    <textarea placeholder="List the main gameplay mechanics and how they work..."></textarea>
                </div>
                <div class="portfolio-section">
                    <h3>🎨 Visual Style</h3>
                    <textarea placeholder="Describe the aesthetic and art style of your game..."></textarea>
                </div>
                <div class="portfolio-section">
                    <h3>♿ Accessibility Features</h3>
                    <textarea placeholder="How will you make your game accessible to all players?"></textarea>
                </div>
                <div class="portfolio-section">
                    <h3>🔄 Design Principles Applied</h3>
                    <textarea placeholder="Which design principles will you focus on and why?"></textarea>
                </div>
                <button class="btn" id="save-portfolio-btn">Save Portfolio Plan</button>
            </div>
            <div class="save-button-container">
                <button class="btn save-pdf-btn" data-section-id="portfolio">Save as PDF</button>
            </div>
        </div>
        
        <div id="assessment" class="content-section">
            <h2>Knowledge Check - Test Your Understanding</h2>
            
            <div class="knowledge-check">
                <h3>Question 1: Core Mechanics</h3>
                <p>What are the five essential components of most games?</p>
                <div>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q1"> Graphics, Sound, Story, Characters, Levels
                    </label>
                    <label class="quiz-option" data-correct="true">
                        <input type="radio" name="q1"> Game World, Characteristics, Core Mechanic, Goal, Rewards/Challenges
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q1"> Programming, Art, Music, Testing, Publishing
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q1"> Players, Controllers, Screen, Console, Internet
                    </label>
                </div>
            </div>
            
            <div class="knowledge-check">
                <h3>Question 2: Design Principles</h3>
                <p>Which principle ensures no single strategy dominates gameplay?</p>
                <div>
                    <label class="quiz-option" data-correct="true">
                        <input type="radio" name="q2"> Balance
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q2"> Pacing
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q2"> Flow
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q2"> Immersion
                    </label>
                </div>
            </div>
            
            <div class="knowledge-check">
                <h3>Question 3: Accessibility</h3>
                <p>Which is NOT a common accessibility feature in games?</p>
                <div>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q3"> Colorblind modes
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q3"> Customizable controls
                    </label>
                    <label class="quiz-option" data-correct="true">
                        <input type="radio" name="q3"> Removing all challenge
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q3"> Subtitles and visual cues
                    </label>
                </div>
            </div>
            
            <div class="knowledge-check">
                <h3>Question 4: Game Evolution</h3>
                <p>What innovation did Pac-Man bring to gaming?</p>
                <div>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q4"> First video game ever made
                    </label>
                    <label class="quiz-option" data-correct="true">
                        <input type="radio" name="q4"> First game with a mascot character
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q4"> First 3D graphics
                    </label>
                    <label class="quiz-option" data-correct="false">
                        <input type="radio" name="q4"> First online multiplayer
                    </label>
                </div>
            </div>
            
            <button class="btn" id="calculate-score-btn">Calculate My Score</button>
            <div id="score-display" style="margin-top: 20px; font-size: 24px; font-weight: bold; color: #667eea;"></div>
            <div class="save-button-container">
                <button class="btn save-pdf-btn" data-section-id="assessment">Save as PDF</button>
            </div>
        </div>
    </div>
    
    <div class="timer" id="timer">
        Time: <span id="time-display">15:00</span>
    </div>

    <audio id="buzzer" src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjQ1LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1hZAAAAAAAAMQCgSTQoFAwARgAAAAFBWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaW-..//uQxAAAAAAAAANaWzRROqgBAKAyCoYdihk2/SgTvwFp//yTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV....</audio>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA STORAGE & STATE MANAGEMENT ---
            let gameEvaluations = {};
            let currentSection = 'intro';
            let progress = 0;
            let correctAnswers = 0;
            
            // --- TIMER FUNCTIONALITY ---
            let timerInterval = null;
            const TIME_LIMIT = 15 * 60; // 15 minutes in seconds
            const buzzer = document.getElementById('buzzer');
            let sectionTimers = {
                intro: TIME_LIMIT, principles: TIME_LIMIT, evaluation: TIME_LIMIT,
                collaboration: TIME_LIMIT, portfolio: TIME_LIMIT, assessment: TIME_LIMIT
            };

            // --- CORE FUNCTIONS ---
            
            function startSectionTimer(sectionId) {
                if (timerInterval) clearInterval(timerInterval);
                const timeDisplay = document.getElementById('time-display');
                let timeRemaining = sectionTimers[sectionId];
                const updateDisplay = () => {
                    const minutes = Math.floor(timeRemaining / 60);
                    const seconds = timeRemaining % 60;
                    timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                };
                updateDisplay();
                timerInterval = setInterval(() => {
                    if (timeRemaining > 0) {
                        timeRemaining--;
                        sectionTimers[sectionId] = timeRemaining;
                        updateDisplay();
                    } else {
                        clearInterval(timerInterval);
                        timeDisplay.textContent = "Time's up!";
                        buzzer.play();
                    }
                }, 1000);
            }

            function showSection(sectionId) {
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.getElementById(sectionId).classList.add('active');
                document.querySelector(`.tab[data-section="${sectionId}"]`).classList.add('active');
                updateProgress(sectionId);
                currentSection = sectionId;
                startSectionTimer(sectionId);
            }
            
            function updateProgress(section) {
                const sections = ['intro', 'principles', 'evaluation', 'collaboration', 'portfolio', 'assessment'];
                const index = sections.indexOf(section);
                progress = Math.round(((index + 1) / sections.length) * 100);
                const progressBar = document.getElementById('progress');
                progressBar.style.width = `${progress}%`;
                progressBar.textContent = `${progress}%`;
            }
            
            function updateCollaborationSummary() {
                let summary;
                if (Object.keys(gameEvaluations).length === 0) {
                    summary = '<p>Complete the game evaluation section first!</p>';
                } else {
                    summary = '<ul>';
                    for (const game in gameEvaluations) {
                        const evalData = gameEvaluations[game];
                        summary += `<li>${game}: M:${evalData.mechanics || '-'}, A:${evalData.aesthetics || '-'}, U:${evalData.usability || '-'}</li>`;
                    }
                    summary += '</ul>';
                }
                document.getElementById('your-eval-summary').innerHTML = summary;
            }

            function togglePrinciple(card) {
                card.classList.toggle('expanded');
            }

            function saveEvaluation(game, criterion, value) {
                if (!gameEvaluations[game]) gameEvaluations[game] = {};
                gameEvaluations[game][criterion] = value;
                updateCollaborationSummary();
            }

            function generateSummary() {
                let summary = '<h3>Your Evaluation Summary:</h3><ul>';
                for (const game in gameEvaluations) {
                    const evalData = gameEvaluations[game];
                    const total = (parseInt(evalData.mechanics || 0) + parseInt(evalData.aesthetics || 0) + parseInt(evalData.usability || 0));
                    const count = (evalData.mechanics ? 1 : 0) + (evalData.aesthetics ? 1 : 0) + (evalData.usability ? 1 : 0);
                    const avg = count > 0 ? (total / count).toFixed(1) : 0;
                    summary += `<li><strong>${game.charAt(0).toUpperCase() + game.slice(1)}:</strong> Avg Score: ${avg}/5 (M:${evalData.mechanics || 'N/A'}, A:${evalData.aesthetics || 'N/A'}, U:${evalData.usability || 'N/A'})</li>`;
                }
                summary += '</ul>';
                document.getElementById('evaluation-summary').innerHTML = summary;
            }

            function selectOption(feedbackId) {
                document.getElementById(feedbackId).style.display = 'block';
            }
            
            function checkAnswer(option, isCorrect) {
                const radio = option.querySelector('input[type="radio"]');
                if (radio.disabled) return;
                
                if (isCorrect) {
                    option.classList.add('correct');
                    correctAnswers++;
                } else {
                    option.classList.add('incorrect');
                }
                
                document.querySelectorAll(`input[name="${radio.name}"]`).forEach(r => {
                    r.disabled = true;
                    r.parentElement.style.pointerEvents = 'none';
                });
            }
            
            function calculateScore() {
                const totalQuestions = document.querySelectorAll('#assessment .knowledge-check').length;
                const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
                const feedback = percentage >= 75 ? '🎉 Excellent work!' : (percentage >= 50 ? '👍 Good effort! Review the principles again.' : '📚 Keep studying! You\'re getting there!');
                document.getElementById('score-display').innerHTML = `Your Score: ${correctAnswers}/${totalQuestions} (${percentage}%)<br>${feedback}`;
            }
            
            function savePortfolio() {
                alert('Portfolio saved!');
            }
            
            function saveSectionAsPDF(sectionId, buttonElement) {
                const { jsPDF } = window.jspdf;
                const sectionElement = document.getElementById(sectionId);
                const sectionTitle = sectionElement.querySelector('h2').innerText;

                const originalButtonText = buttonElement.innerHTML;
                buttonElement.innerHTML = 'Generating PDF...';
                buttonElement.disabled = true;

                html2canvas(sectionElement, { scale: 2, useCORS: true }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const pdfHeight = pdf.internal.pageSize.getHeight();
                    const imgHeight = canvas.height * pdfWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 0;

                    pdf.addImage(imgData, 'PNG', 0, position, pdfWidth, imgHeight);
                    heightLeft -= pdfHeight;

                    while (heightLeft > 0) {
                        position -= pdfHeight;
                        pdf.addPage();
                        pdf.addImage(imgData, 'PNG', 0, position, pdfWidth, imgHeight);
                        heightLeft -= pdfHeight;
                    }
                    pdf.save(`${sectionTitle.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`);
                }).catch(err => {
                    console.error("Error generating PDF:", err);
                    alert("Sorry, there was an error creating the PDF.");
                }).finally(() => {
                    buttonElement.innerHTML = originalButtonText;
                    buttonElement.disabled = false;
                });
            }
            
            // --- INITIALIZATION ---
            function initializeEventListeners() {
                // Tab navigation
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => showSection(tab.dataset.section));
                });

                // Save PDF buttons
                document.querySelectorAll('.save-pdf-btn').forEach(button => {
                    button.addEventListener('click', () => saveSectionAsPDF(button.dataset.sectionId, button));
                });

                // Intro "Quick Think" question
                document.querySelectorAll('#intro .quiz-option').forEach(option => {
                    option.addEventListener('click', () => selectOption('intro1-feedback'));
                });

                // Expandable principle cards
                document.querySelectorAll('.principle-card').forEach(card => {
                    card.addEventListener('click', () => togglePrinciple(card));
                });

                // Quiz answers for "Principles" and "Assessment" sections
                document.querySelectorAll('#principles .quiz-option, #assessment .quiz-option').forEach(option => {
                    const isCorrect = option.dataset.correct === 'true';
                    option.addEventListener('click', () => checkAnswer(option, isCorrect));
                });

                // Game evaluation dropdowns
                document.querySelectorAll('.eval-form select').forEach(select => {
                    select.addEventListener('change', (event) => {
                        const { game, criterion } = event.target.dataset;
                        saveEvaluation(game, criterion, event.target.value);
                    });
                });

                // Specific action buttons
                document.getElementById('generate-summary-btn').addEventListener('click', generateSummary);
                document.getElementById('save-portfolio-btn').addEventListener('click', savePortfolio);
                document.getElementById('calculate-score-btn').addEventListener('click', calculateScore);
            }

            initializeEventListeners();
            showSection('intro'); // Set the initial state
        });
    </script>
</body>
</html>

